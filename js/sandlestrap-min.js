var SandleStrap=function(){this.elementTypes=[],this.elements={}};SandleStrap.prototype.register=function(a){document.createElement(a.config.tag),this.elementTypes.push(a.config.tag),this.elements[a.config.tag]=a,this.updateStyle()},SandleStrap.prototype.updateStyle=function(){var a=fw("#insertedStyle"),b=" { animation-duration: 0.001s;-o-animation-duration: 0.001s;-ms-animation-duration: 0.001s;-moz-animation-duration: 0.001s;-webkit-animation-duration: 0.001s;animation-name: nodeInserted;-o-animation-name: nodeInserted;-ms-animation-name: nodeInserted;-moz-animation-name: nodeInserted;-webkit-animation-name: nodeInserted;}",c="{opacity: 0}",d="{display:block; -moz-box-sizing: border-box; box-sizing: border-box;}",e="";if("undefined"==typeof a){a=document.createElement("style"),a.setAttribute("id","insertedStyle");var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(a,f)}for(var g=this.elementTypes.length;g--;)e+=this.elementTypes[g]+", ";e=e.substring(0,e.lastIndexOf(", ")),a.appendChild(document.createTextNode(e+b)),a.appendChild(document.createTextNode(e+c)),a.appendChild(document.createTextNode(e+d)),this.loadingSelector=e};var ieStinks=!1;SandleStrap.prototype.inserted=function(a,b){var c=!1;a&&(b=a.target,c=!0),c&&"nodeInserted"!==a.animationName||this.inject(b)},SandleStrap.prototype.ssChangeAttribute=function(a,b){var c="."+this.tagName.toLowerCase()+"-"+a;if("undefined"!=typeof this.find(c)){this.setAttribute(a,b);var d=this.find(c);d.innerHTML=b}else console.error('There is no bound attribute "'+a+'" for this element.')},SandleStrap.prototype.ssInnerHTML=function(a){var b=this.find("content");"object"==typeof b&&"undefined"==typeof b.length?b.innerHTML=a:console.error("There needs to be one <content> in this control in order to use the ssInnerHTML function.")},SandleStrap.prototype.inject=function(a){if(a.isFW&&!a.containsClass("rendered")){var b,c=a.tagName.toLowerCase(),d=this.elements[c],e=[],f=fw("<div>");if(d){a.ssChangeAttribute=this.ssChangeAttribute,a.ssInnerHTML=this.ssInnerHTML;var g=d.config.template,h=d.config.attributes;if(h){for(b=h.length;b--;)"type"===h[b]&&(g=d.templates[a.getAttribute(h[b])]||g);for(h.push("content"),b=h.length;b--;){var i=h[b],j=new RegExp("{{"+i+"}}","g"),k=new RegExp('="{{'+i+'}}"',"g");if(k.test(g)&&a.getAttribute(i))g=g.replace(k,'="'+a.getAttribute(i)+'"');else{var l=a.getAttribute(i)||"";g=g.replace(j,'<span class="'+c+"-"+i+'">'+l+"</span>")}}}for(;a.childNodes.length>0;){var m=a.childNodes[0];f.appendChild(m),e.push(m)}if(a.innerHTML=g,-1!==g.indexOf("<content>")){var n=a.find("[content]")[0];for(b=0;b<e.length;b++)n.appendChild(e[b])}d.config.init&&d.config.init(a),a.addClass("rendered")}}};for(var sandlestrap=new SandleStrap,insertedProxy=fw.proxy(sandlestrap.inserted,sandlestrap),listener=["animationstart","MSAnimationStart","oanimationstart","webkitAnimationStart"],i=listener.length,animationListenerSupport=!1;i--;)fw.checkEventSupport(listener[i])&&(document.addEventListener(listener[i],insertedProxy,!1),animationListenerSupport=!0);var observeDOM=function(a,b){var c=window.MutationObserver||window.WebKitMutationObserver;if(c){var d=new c(function(a){if(a[0].addedNodes.length)for(var c=a[0].addedNodes.length;c--;)b(void 0,a[0].addedNodes[c])});d.observe(a,{childList:!0,subtree:!0})}else a.addListener("DOMNodeInserted",b)};animationListenerSupport||observeDOM(document.documentElement,insertedProxy),document.createElement("content"),document.onreadystatechange=function(){"complete"==document.readyState&&fw("["+sandlestrap.loadingSelector+"]").forEach(function(a){insertedProxy(void 0,a)})};