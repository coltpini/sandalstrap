var ssAnnotate=function(){};ssAnnotate.config={tag:"ss-annotate",template:'<span class="number"></span><p class="container"></p>',attributes:[""],init:function(a){var b=new Annotate(a);sandlestrap.insertionHandlers.push(b.add)}},sandlestrap.register(ssAnnotate);var Annotate=function(a){this.elem=a,this.annotationNumber=a.find("span.number"),this.annotationContainer=a.find("p.container"),this.list=this.getList(),this.counter=0,this.run()};Annotate.prototype.getList=function(){return document.body.find("[[annotation]]")},Annotate.prototype.run=function(){var a=fw.proxy(this.add,this);this.list.forEach(a)},Annotate.prototype.clickerHandler=function(a){fw.stopCancel(a);for(var b=a.target,c=b.parentElement,d="";null===c.getAttribute("annotation");)c=c.parentElement;d=c.getAttribute("annotation"),this.annotationContainer.innerHTML=d,this.annotationNumber.innerHTML=b.innerHTML},Annotate.prototype.add=function(a){if(null!==a.getAttribute("annotation")&&!a.containsClass("annotated")){a.addClass("annotated");var b=a.createChild("span");b.addListener("click",this.clickerHandler,!1,this),b.addClass("clicker"),this.counter+=1,b.innerHTML=this.counter}};